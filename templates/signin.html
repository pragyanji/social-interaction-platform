{% extends "base.html" %}
{% load socialaccount %}

{% block title %}Sign in Â· Chatsphere{% endblock %}

{% block content %}
<h2 class="page-title">Sign in</h2>

<form method="post" action="{% url 'signin' %}" class="form card">
  {% csrf_token %}

  {# If you pass a Django form (e.g., AuthenticationForm), show its non-field errors #}
  {% if form and form.non_field_errors %}
    <div class="form-errors">
      {% for e in form.non_field_errors %}<p>{{ e }}</p>{% endfor %}
    </div>
  {% endif %}

  <div class="field">
    <label for="id_username">Username</label>
    <input id="id_username" name="username" type="text"
       value="{{ form.username.value|default_if_none:'' }}" required />
    {% if form and form.username.errors %}
      <small class="error">{% for e in form.username.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}</small>
    {% endif %}
  </div>

  <div class="field">
    <label for="id_password">Password</label>
    <input id="id_password" name="password" type="password" required />
    {% if form and form.password.errors %}
      <small class="error">{% for e in form.password.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}</small>
    {% endif %}
  </div>

  <button type="submit" class="btn btn-primary">Sign in</button>
  <p class="muted">No account? <a href="{% url 'signup' %}">Create one</a>.</p>
  {# Optional: <a href="{% url 'password_reset' %}">Forgot password?</a> #}

  <div class="card" style="margin-top:12px">
  <p class="muted">Or continue with</p>
  <a class="btn btn-outline" href="{% provider_login_url 'google' process='login' %}">
    Continue with Google
  </a>
</div>

</form>
{% endblock %}

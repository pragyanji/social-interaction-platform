{% extends "base.html" %}
{% load static %}
{% load socialaccount %}

{% block title %}Sign in ¬∑ Chatsphere{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{% static 'css/signin.css' %}" />
{% endblock %}

{% block content %}
<div class="auth-container">
  <div class="auth-grid">
    <!-- Sign In Form -->
    <div class="auth-form-wrapper">
      <form method="post" action="{% url 'signin' %}" class="auth-form">
        <div>
          <h2>Sign In</h2>
          <p class="auth-form-subtitle">Enter your credentials to continue</p>
        </div>

        {% csrf_token %}

        {# Non-field errors #}
        {% if form and form.non_field_errors %}
          <div class="form-errors">
            {% for e in form.non_field_errors %}<p>{{ e }}</p>{% endfor %}
          </div>
        {% endif %}

        <!-- Username Field -->
        <div class="auth-field">
          <label for="id_username">Username</label>
          <input id="id_username" name="username" type="text"
             value="{{ form.username.value|default_if_none:'' }}"
             placeholder="Enter your username"
             required />
          {% if form and form.username.errors %}
            <small class="error-text">{% for e in form.username.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}</small>
          {% endif %}
        </div>

        <!-- Password Field -->
        <div class="auth-field">
          <label for="id_password">Password</label>
          <input id="id_password" name="password" type="password"
             placeholder="Enter your password"
             required />
          {% if form and form.password.errors %}
            <small class="error-text">{% for e in form.password.errors %}{{ e }}{% if not forloop.last %}<br>{% endif %}{% endfor %}</small>
          {% endif %}
        </div>

        <button type="submit" class="auth-submit-btn">Sign In</button>

        <!-- Divider -->
        <div class="auth-divider">
          <div class="auth-divider-text">or</div>
        </div>

        <!-- Google Sign In -->
        <a class="google-btn" href="{% provider_login_url 'google' process='login' %}">
          <span>üîê</span>
          <span>Continue with Google</span>
        </a>

        <!-- Sign Up Link -->
        <p class="auth-signup-link">
          Don't have an account? <a href="{% url 'signup' %}">Create one free ‚Üí</a>
        </p>
      </form>
    </div>
  </div>
</div>
{% endblock %}
